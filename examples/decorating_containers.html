<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Module decorating_containers</title>
		<link rel="stylesheet" href="./css/style.min.css"/>
		<script type="text/javascript" src="./js/script.min.js"></script>
	</head>
	<body onload="setupDdox();">
		<header></header>
		<nav id="main-nav">
			<div>
				<noscript>
					<p style="color: red">The search functionality needs JavaScript enabled</p>
				</noscript>
				<div id="symbolSearchPane" style="display: none">
					<form action="#" method="GET">
						<input id="symbolSearch" type="text" name="q" placeholder="Search for symbols" autocomplete="off" onchange="performSymbolSearch(24);" onkeypress="this.onchange();" onpaste="this.onchange();" oninput="this.onchange();" autofocus/>
					</form>
					<ul id="symbolSearchResults" class="symbolList" style="display: none"></ul><script type="application/javascript" src="./symbols.js"></script><script type="application/javascript">var symbolSearchRootDir = "./";
document.getElementById('symbolSearchPane').style.display = 'block';</script>
				</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">aermicioi
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi.html">aedi</a>
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/configurer.html">configurer</a>
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/configurer/annotation.html">annotation</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/annotation/annotation.html">annotation</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/annotation/component_scan.html">component_scan</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/configurer/register.html">register</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/register/configuration_context_factory.html">configuration_context_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/register/container.html">container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/register/context.html">context</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/register/factory_configurer.html">factory_configurer</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/configurer/register/register.html">register</a>
						</div>
					</li>
				</ul>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/container.html">container</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/aggregate_container.html">aggregate_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/aliasing_container.html">aliasing_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/application_container.html">application_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/container.html">container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/decorating_mixin.html">decorating_mixin</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/factory.html">factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/gc_registering_container.html">gc_registering_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/prototype_container.html">prototype_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/proxy_container.html">proxy_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/singleton_container.html">singleton_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/subscribable_container.html">subscribable_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/switchable_container.html">switchable_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/tuple_container.html">tuple_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/type_based_container.html">type_based_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/container/value_container.html">value_container</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/exception.html">exception</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/circular_reference_exception.html">circular_reference_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/di_exception.html">di_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/instance_factory_exception.html">instance_factory_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/invalid_cast_exception.html">invalid_cast_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/in_progress_exception.html">in_progress_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/in_use_exception.html">in_use_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/not_found_exception.html">not_found_exception</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/exception/property_configurer_exception.html">property_configurer_exception</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/factory.html">factory</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/decorating_factory.html">decorating_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/factory.html">factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/generic_factory.html">generic_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/proxy_factory.html">proxy_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/reference.html">reference</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/factory/wrapping_factory.html">wrapping_factory</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/aedi/storage.html">storage</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/aggregate_locator.html">aggregate_locator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/alias_aware.html">alias_aware</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/allocator_aware.html">allocator_aware</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/container.html">container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/decorator.html">decorator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/locator.html">locator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/locator_aware.html">locator_aware</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/object_storage.html">object_storage</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/storage.html">storage</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/storage/wrapper.html">wrapper</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">test
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">configurer
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">register
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/configurer/register/container.html">container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/configurer/register/context.html">context</a>
						</div>
					</li>
				</ul>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">container
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/aggregate_container.html">aggregate_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/application_container.html">application_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/deffered_container.html">deffered_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/factory.html">factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/prototype_container.html">prototype_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/proxy_container.html">proxy_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/singleton_container.html">singleton_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/subscribable_container.html">subscribable_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/switchable_container.html">switchable_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/tuple_container.html">tuple_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/type_based_container.html">type_based_container</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/container/value_container.html">value_container</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">exception
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/exception/exception.html">exception</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">factory
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/decorating_factory.html">decorating_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/factory.html">factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/generic_factory.html">generic_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/proxy_factory.html">proxy_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/reference.html">reference</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory/wrapping_factory.html">wrapping_factory</a>
						</div>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">storage
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/storage/aggregate_locator.html">aggregate_locator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/storage/locator.html">locator</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/storage/object_storage.html">object_storage</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/storage/storage.html">storage</a>
						</div>
					</li>
				</ul>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/factory_configurer.html">factory_configurer</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/fixture.html">fixture</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/aedi/test/fixture_second.html">fixture_second</a>
						</div>
					</li>
				</ul>
					</li>
				</ul>
					</li>
					<li class="tree-view collapsed">
						<div class="package ">util
						</div>
				<ul class="tree-view">
					<li class="tree-view collapsed">
						<div class="package ">
							<a href="./aermicioi/util/traits.html">traits</a>
						</div>
				<ul class="tree-view">
					<li>
						<div class="module ">
							<a href="./aermicioi/util/traits/enforce.html">enforce</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/util/traits/partial.html">partial</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./aermicioi/util/traits/traits.html">traits</a>
						</div>
					</li>
				</ul>
					</li>
				</ul>
					</li>
				</ul>
					</li>
					<li>
						<div class="module ">
							<a href="./annotation_configuration.html">annotation_configuration</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./configuration_primitives.html">configuration_primitives</a>
						</div>
					</li>
					<li>
						<div class="module selected">
							<a href="./decorating_containers.html">decorating_containers</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./dependencies.html">dependencies</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./examples.html">examples</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./extending_containers.html">extending_containers</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./extending_factory.html">extending_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./extending_generic_factory.html">extending_generic_factory</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./memory_management.html">memory_management</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./minimal.html">minimal</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./multiple_containers.html">multiple_containers</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./named_dependencies.html">named_dependencies</a>
						</div>
					</li>
					<li>
						<div class="module ">
							<a href="./value_container.html">value_container</a>
						</div>
					</li>
				</ul>
			</div>
			<p id="main-nav-footer">
				Built with
				<a href="https://github.com/MartinNowak/scod">scod</a>
			</p>
		</nav>
		<div id="main-contents">
			<div>
				<h1>Module decorating_containers</h1><p>Aedi, a dependency injection library.
</p><section><p>Aedi is a dependency injection library. It does provide a set of containers that do
IoC, and an interface to configure application components (structs, objects, etc.)
</p>
</section>

				<section><section><h2>Aim</h2>
<p>The aim of library is to provide a dependency injection solution that is
feature rich, easy to use, easy to learn, and easy to extend up to your needs.
</p>

<p>Aedi does provide basic containers singleton and prototype, which can be combined into some-
thing more complex. Though, on top of their behavior additional one can be built, such as a container
that can be enabled/disabled, or a container that adds observer pattern. Out of the box framework does provide
following decorating containers:
</p>

<p><ul>    <li>aliasing - provides aliasing functions</li>
    <li>gc rigistered - registers instantiated components with gc, when other that gc allocator are used</li>
    <li>subscribable - provides observable pattern on container events</li>
    <li>typed - serves components based on their implemented interfaces</li>
    <li>proxy - serves component proxies instead of original ones</li>
    <li>deffered - provides deffered construction of components</li>
</ul>
</p>

<p>Each decorating container listed below will be explained in detail, followed by a short explanation of what current example does.
</p>
</section>
<section><h2>Aliasing</h2>
<p>The aliasing container decorator adds ability to add aliases to existing components in container. Therefore
a "foo" component can have multiple aliases "moo", "boo" etc. Each alias will resolve to same component in container.
Such feature is useful when an existing component in container for compatibility reasons should have another identity as
well. To use aliasing container simply wrap any container in <code class="lang-d">aliasing</code> method which will decorate existing one.
UFCS syntax is desired for fluent like style.
</p>

<pre class="code"><code class="lang-d"><span class="kwd">auto </span><span class="pln">cont </span><span class="pun">= </span><span class="pln">aggregate</span><span class="pun">(
    </span><span class="pln">singleton</span><span class="pun">, </span><span class="str">"singleton"</span><span class="pun">,
    </span><span class="pln">prototype</span><span class="pun">, </span><span class="str">"prototype"</span><span class="pun">,
    </span><span class="pln">values</span><span class="pun">, </span><span class="str">"parameters"</span><span class="pun">,
    </span><span class="pln">gasoline</span><span class="pun">, </span><span class="str">"gasoline"</span><span class="pun">,
    </span><span class="pln">electric</span><span class="pun">, </span><span class="str">"electric"</span><span class="pun">,
    </span><span class="pln">diesel</span><span class="pun">, </span><span class="str">"diesel"
</span><span class="pun">)<wbr/>.</span><span class="pln">aliasing</span><span class="pun">;</span></code></pre>
</section>
<section><h2>GcRegistered</h2>
<p>GC registered decorating container registers any created component with global gc available in D. Since any component can have customized
memory allocation strategy through std.experimental.allocator, were one of strategy is to use garbage collector, and each component
can have dependencies to other components, in some cases, gc on collection cycle could deallocate a component (which technically isn't
referenced by anyone) even if it is still referenced by other component of which gc is not aware of. GC registered container aims to register
all public components provided by underlying container into GC in order to avoid the case from above. To use it, just suffix any container with <code class="lang-d">gcRegistered</code>.
</p>

<pre class="code"><code class="lang-d"><span class="kwd">auto </span><span class="pln">cont </span><span class="pun">= </span><span class="pln">aggregate</span><span class="pun">(
    </span><span class="pln">singleton</span><span class="pun">, </span><span class="str">"singleton"</span><span class="pun">,
    </span><span class="pln">prototype</span><span class="pun">, </span><span class="str">"prototype"</span><span class="pun">,
    </span><span class="pln">values</span><span class="pun">, </span><span class="str">"parameters"</span><span class="pun">,
    </span><span class="pln">gasoline</span><span class="pun">, </span><span class="str">"gasoline"</span><span class="pun">,
    </span><span class="pln">electric</span><span class="pun">, </span><span class="str">"electric"</span><span class="pun">,
    </span><span class="pln">diesel</span><span class="pun">, </span><span class="str">"diesel"
</span><span class="pun">)<wbr/>.</span><span class="pln">aliasing<wbr/></span><span class="pun">.</span><span class="pln">gcRegistered</span><span class="pun">;</span></code></pre>
</section>
<section><h2>Subscribable</h2>
<p>Subscribable container offers a list of events to which a listener can subscribe and perform operations on. Currently only two events are provided:
<ol>    <li>instantiation pre event - fired before instantiation of container</li>
    <li>instantiation post event - fired after instantiation of container</li>
</ol>
An example of such listeners can be like in listing below, which will enable a container before instantiation based on profile argument
</p>
<pre class="code"><code class="lang-d"><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">subscribable<wbr/></span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(
    </span><span class="typ">ContainerInstantiationEventType<wbr/></span><span class="pun">.</span><span class="pln">pre</span><span class="pun">,
    {
        </span><span class="kwd">if </span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">string</span><span class="pun">(</span><span class="str">"profile"</span><span class="pun">))) {
            </span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">Switchable</span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">string</span><span class="pun">(</span><span class="str">"profile"</span><span class="pun">))<wbr/>.</span><span class="pln">enabled </span><span class="pun">= </span><span class="kwd">true</span><span class="pun">;
            </span><span class="kwd">return</span><span class="pun">;
        }

        </span><span class="kwd">throw new </span><span class="typ">Exception</span><span class="pun">(</span><span class="str">"No engine profile selected. Specify it with -p"</span><span class="pun">);
    }
);</span></code></pre>
</section>
<section><h2>Typed</h2>
<p>Typed container decorates underlying container with ability to provide a component based on interface it implements.
Code using typed container attempts to get a component by an interface such as <code class="lang-d">Engine</code> in this example,
typed container will check if underlying container has a component identified by provided interface. If yes it will give
the component from decorated container. If not, it will search for all registered components that implement the required interface
and use first found component to serve it. Notice that in this example, no <code class="lang-d">Engine</code> was registered in container by
<code class="lang-d">Engine</code> interface. Each instance <code class="lang-d">GasolineEngine</code>, <code class="lang-d">ElectricEngine</code>, and <code class="lang-d">DieselEngine</code>
are registered by their type only. No attempt to alias one of them to <code class="lang-d">Engine</code> is done, yet when Car is instantiated, a component
implementing <code class="lang-d">Engine</code> interface is supplied. This magic is done by typed container, which supplied first available component implementing
<code class="lang-d">Engine</code> interface.
</p>
</section>
<section><h2>Proxy</h2>
<p>A proxy container proxies all components supplied by decorated container. It will supply proxy objects instead of real components, which in turn
will on each public call of a proxy will redirect it to component in redirected container, and return a value from it. The proxy container
alone is not much useful. It is intended to be used along with containers that are dependendet on some global state to provide components.
An example of such containers could be containers that provide different instances of same component per thread or fiber, or in case of
web application, a container that gives new instances of same component for each new available request web application receives.
</p>
</section>
<section><h2>Deffered</h2>
<p>Deffered container, executes delayed components construction and configuration. Construction and configuration of a component can occur in cases
when there is a circular dependency between a set of components. In such case to resolve it, injection of one dependency can be delayed.
Delaying of construction or configuration is left to component factory, while execution of delayed action is enforced upon Deffered container.
To enable circular dependency resolution, decorate container with <code class="lang-d">deffered</code> decorator, and register components using <code class="lang-d">withConfigurationDefferring</code>
configuration context (simply append it after <code class="lang-d">container.configure</code> method). This exampe shows a typical example of circular
dependency. A car has a dependency on four tires, while each tire has a dependency on a car instance, resulting in a circular dependency.
Removing <code class="lang-d">deffered</code> or <code class="lang-d">withConfigurationDefferring</code> will result in circular dependency exception thrown by container.
</p>
</section>
<section><h2>Example</h2>
<p>Such behavior can be useful, like in car company example, that at certian point of time decided that their application should provide
upon start cars with different engines, electric/diesel/gasoline.
</p>

<p>The workflow needed to implement in application in order to allow 3 different configurations is
shown below and consists of following steps:
<ol>    <li>read profile argument from command line or environment </li>
    <li>switch on it, and register diesel/gasoline/electric engine by Engine interface depending on selected profile </li>
</ol>
</p>

<p>Following snippet of code shows all decorating containers in use except of proxy one.
</p>

<pre class="code"><code class="lang-d"><span class="kwd">auto </span><span class="pln">decorated</span><span class="pun">() {
    </span><span class="kwd">auto </span><span class="pln">gasoline </span><span class="pun">= </span><span class="pln">singleton<wbr/></span><span class="pun">.</span><span class="pln">typed<wbr/></span><span class="pun">.</span><span class="pln">switchable<wbr/></span><span class="pun">.</span><span class="pln">enabled</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);
    </span><span class="kwd">auto </span><span class="pln">electric </span><span class="pun">= </span><span class="pln">singleton<wbr/></span><span class="pun">.</span><span class="pln">typed<wbr/></span><span class="pun">.</span><span class="pln">switchable<wbr/></span><span class="pun">.</span><span class="pln">enabled</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);
    </span><span class="kwd">auto </span><span class="pln">diesel </span><span class="pun">= </span><span class="pln">singleton<wbr/></span><span class="pun">.</span><span class="pln">typed<wbr/></span><span class="pun">.</span><span class="pln">switchable<wbr/></span><span class="pun">.</span><span class="pln">enabled</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);

    </span><span class="kwd">auto </span><span class="pln">cont </span><span class="pun">= </span><span class="pln">aggregate</span><span class="pun">(
        </span><span class="pln">singleton</span><span class="pun">, </span><span class="str">"singleton"</span><span class="pun">,
        </span><span class="pln">prototype</span><span class="pun">, </span><span class="str">"prototype"</span><span class="pun">,
        </span><span class="pln">values</span><span class="pun">, </span><span class="str">"parameters"</span><span class="pun">,
        </span><span class="pln">gasoline</span><span class="pun">, </span><span class="str">"gasoline"</span><span class="pun">,
        </span><span class="pln">electric</span><span class="pun">, </span><span class="str">"electric"</span><span class="pun">,
        </span><span class="pln">diesel</span><span class="pun">, </span><span class="str">"diesel"
    </span><span class="pun">)<wbr/>.</span><span class="pln">aliasing<wbr/></span><span class="pun">.</span><span class="pln">gcRegistered<wbr/></span><span class="pun">.</span><span class="pln">deffered</span><span class="pun">;

    </span><span class="kwd">return </span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">subscribable<wbr/></span><span class="pun">.</span><span class="pln">subscribe</span><span class="pun">(
        </span><span class="typ">ContainerInstantiationEventType<wbr/></span><span class="pun">.</span><span class="pln">pre</span><span class="pun">,
        {
            </span><span class="kwd">if </span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">has</span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">string</span><span class="pun">(</span><span class="str">"profile"</span><span class="pun">))) {
                </span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">Switchable</span><span class="pun">(</span><span class="pln">cont<wbr/></span><span class="pun">.</span><span class="pln">locate</span><span class="pun">!</span><span class="typ">string</span><span class="pun">(</span><span class="str">"profile"</span><span class="pun">))<wbr/>.</span><span class="pln">enabled </span><span class="pun">= </span><span class="kwd">true</span><span class="pun">;
                </span><span class="kwd">return</span><span class="pun">;
            }

            </span><span class="kwd">throw new </span><span class="typ">Exception</span><span class="pun">(</span><span class="str">"No engine profile selected. Specify it with -p"</span><span class="pun">);
        }
    );
}</span></code></pre>

<p>The profile based container is assembled from 3 typed and switchable containers, and a subscribable
composite container with gc component registration and construction of deffered components.
When the application is booted up, the code from <code class="lang-d">main(string[] args)</code> loads into container
"profile" argument. Afterwards components are registered into container, and for each profile,
the right engine is registered in respective gasoline, electric, diesel containers. Once this
is finished, the container is instantiated using <code class="lang-d">intantiate</code> method. During instantiation phase,
subscribable composite container fires an pre-instantiation event on which, a delegate is attached, that
checks for "profile" argument, and enables the container identified by value in profile container.
Afterwards construction of components proceeds. When car is constructed typed container jumps in and
provides an implenentation of <code class="lang-d">Engine</code> for car depending on enabled container. When
construction arrives at a Tire, a circular dependency is detected, and construction of a component is
deffered at later stage in order to break dependency chain. Once component is constructed, it is registered
with global gc instance in order to avoid destruction of gc managed components while they are still referenced
by non-managed components. Once instantiation is finished, car is fetched from container and displayed in console.
</p>

<p>Try running this example, pass as argument <code class="lang-d">--profile</code> with value of
<code class="lang-d">gasoline</code>, <code class="lang-d">electric</code>, <code class="lang-d">diesel</code>.
Experiment with it, to understand decorating containers.
</p>
</section>
</section>
				<section>
					<h2>Interfaces</h2>
					<table>
						<col class="caption"/>
						<tr>
							<th>Name</th><th>Description</th>
						</tr>
						<tr>
							<td>
								<code>
									<a id="Engine" class="public" href="./decorating_containers/Engine.html">Engine</a>
								</code>
							</td>
							<td>Interface for engines.
</td>
						</tr>
					</table>
				</section>
				<section>
					<h2>Classes</h2>
					<table>
						<col class="caption"/>
						<tr>
							<th>Name</th><th>Description</th>
						</tr>
						<tr>
							<td>
								<code>
									<a id="Car" class="public" href="./decorating_containers/Car.html">Car</a>
								</code>
							</td>
							<td>A class representing a car.
</td>
						</tr>
						<tr>
							<td>
								<code>
									<a id="DieselEngine" class="public" href="./decorating_containers/DieselEngine.html">DieselEngine</a>
								</code>
							</td>
							<td>A concrete implementation of Engine that uses diesel for propelling.
</td>
						</tr>
						<tr>
							<td>
								<code>
									<a id="ElectricEngine" class="public" href="./decorating_containers/ElectricEngine.html">ElectricEngine</a>
								</code>
							</td>
							<td>A concrete implementation of Engine that uses electricity for propelling.
</td>
						</tr>
						<tr>
							<td>
								<code>
									<a id="GasolineEngine" class="public" href="./decorating_containers/GasolineEngine.html">GasolineEngine</a>
								</code>
							</td>
							<td>A concrete implementation of Engine that uses gasoline for propelling.
</td>
						</tr>
						<tr>
							<td>
								<code>
									<a id="Tire" class="public" href="./decorating_containers/Tire.html">Tire</a>
								</code>
							</td>
							<td>Tire, what it can represent else?
</td>
						</tr>
					</table>
				</section>
				<section>
					<h2>Structs</h2>
					<table>
						<col class="caption"/>
						<tr>
							<th>Name</th><th>Description</th>
						</tr>
						<tr>
							<td>
								<code>
									<a id="Color" class="public" href="./decorating_containers/Color.html">Color</a>
								</code>
							</td>
							<td>A struct that should be managed by container.
</td>
						</tr>
						<tr>
							<td>
								<code>
									<a id="Size" class="public" href="./decorating_containers/Size.html">Size</a>
								</code>
							</td>
							<td>Size of a car.
</td>
						</tr>
					</table>
				</section>
			</div>
			<footer>
				<div id="license-info">
					<p>aermicioi
</p>

					
					<p>Boost Software License - Version 1.0 - August 17th, 2003
</p>

<p>	Permission is hereby granted, free of charge, to any person or organization
	obtaining a copy of the software and accompanying documentation covered by
	this license (the "Software") to use, reproduce, display, distribute,
	execute, and transmit the Software, and to prepare derivative works of the
	Software, and to permit third-parties to whom the Software is furnished to
	do so, all subject to the following:
</p>

<p>	The copyright notices in the Software and this entire statement, including
	the above license grant, this restriction and the following disclaimer,
	must be included in all copies of the Software, in whole or in part, and
	all derivative works of the Software, unless such copies or derivative
	works are solely in the form of machine-executable object code generated by
	a source language processor.
</p>

<p>	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
	SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
	FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
	ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
	DEALINGS IN THE SOFTWARE.
</p>

				</div>
			</footer>
		</div>
	</body>
</html>